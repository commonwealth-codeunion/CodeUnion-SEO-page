var preloader=document.querySelector(".preloader"),headerBurger=document.querySelector(".header__burger"),headerNav=document.querySelector(".header__nav"),headerNavItem=document.querySelectorAll(".header__nav-item"),inputPhone=document.querySelector("#phone"),wrapper=document.querySelector(".wrapper"),popupBtn=document.querySelectorAll(".popup-btn"),popup=document.querySelector(".popup"),popupClose=document.querySelector(".popup__close"),footer=document.querySelector(".footer"),form=document.querySelector(".form"),validate=document.querySelectorAll(".form__input"),formLoading=form.querySelector(".form__sending"),formSended=document.querySelector(".sended"),sectionUp=document.querySelector(".section-up"),sectionDown=document.querySelector(".section-down"),sectionBg=document.querySelectorAll(".section-bg"),whyBg=document.querySelector(".why__bg"),bg=document.querySelector(".section-bg");document.addEventListener("DOMContentLoaded",function(){preloader.classList.add("loaded"),document.body.style.overflow="",new fullpage("#fullpage",{licenseKey:"YOUR KEY HERE",onLeave:function(e,t){"promotion"==t.anchor?(whyBg.style.display="none",bg.style.display="block",bg.currentTime=whyBg.currentTime+=1):"promotion"==e.anchor&&"why"==t.anchor&&setTimeout(function(){whyBg.style.display="block",bg.style.display="none",whyBg.currentTime=bg.currentTime+=1},1e3)},menu:"#myMenu",anchors:["promotion","why","services","price","trust"],normalScrollElements:".price__items-wrapper, .trust__slider"}),sectionUp.addEventListener("click",function(){fullpage_api.moveSectionUp()}),sectionDown.addEventListener("click",function(){fullpage_api.moveSectionDown()});new Swiper(".services__slider",{speed:500,loop:!0,spaceBetween:200,pagination:{el:".swiper-pagination",type:"fraction"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),new Swiper(".trust__slider",{slidesPerView:3,speed:600,loop:!0,spaceBetween:108,autoplay:{delay:1500,disableOnInteraction:!0},breakpoints:{320:{slidesPerView:2,spaceBetween:20},580:{slidesPerView:3,spaceBetween:50},1280:{slidesPerView:3,spaceBetween:108}}});headerBurger.addEventListener("click",function(){r([footer,headerNav,headerBurger],"toggle","active")}),headerNavItem.forEach(function(e){e.addEventListener("click",function(){r([footer,headerNav,headerBurger],"remove","active")})}),popupBtn.forEach(function(e){e.addEventListener("click",function(){event.stopPropagation(),t(sectionBg,"pause"),r([popup,wrapper],"toggle","active"),fullpage_api.setAllowScrolling(!1),fullpage_api.setKeyboardScrolling(!1)})}),popupClose.addEventListener("click",function(){t(sectionBg,"play"),r([popup,wrapper],"remove","active"),fullpage_api.setAllowScrolling(!0),fullpage_api.setKeyboardScrolling(!0)}),wrapper.addEventListener("click",function(){t(sectionBg,"play"),r([popup,wrapper],"remove","active"),fullpage_api.setAllowScrolling(!0),fullpage_api.setKeyboardScrolling(!0)}),inputPhone.addEventListener("keydown",function(e){"ArrowLeft"!=e.key&&"ArrowRight"!=e.key&&"Backspace"!=e.key&&"Tab"!=e.key&&e.preventDefault();var t="+7 (111) 111-11-11";if(/[0-9\+\ \-\(\)]/.test(e.key)){var o=this.value,n=o.length;if(/[0-9]/.test(e.key))if("1"==t[n])this.value=o+e.key;else for(var r=n;r<t.length;r++){if("1"==t[r]){this.value=o+e.key;break}o+=t[r]}}});var o=0;function n(){popup.classList.remove("active"),formLoading.classList.remove("loading"),formSended.classList.add("active"),wrapper.classList.add("active"),form.reset(),setTimeout(function(){formSended.classList.remove("active"),wrapper.classList.remove("active")},3e3)}function t(e,t){e.forEach(function(e){"play"===t?e.play():e.pause()})}function r(e,t,o){e.forEach(function(e){"toggle"===t?e.classList.toggle(o):"add"===t?e.classList.add(o):e.classList.remove(o)})}form.addEventListener("submit",function(e){var t;e.preventDefault(),function(e){for(var t=0;t<e.length;t++){if(e[t].classList.contains("_email")){if(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g(e[t]))return e[t].classList.add("wrong"),o++}else if(e[t].classList.contains("phone")){if(/([^0-9])/g(e[t]))return e[t].classList.add("wrong"),o++}else if(!e[t].value)return e[t].classList.add("wrong"),o++;o=0}}(validate),0===o&&(e=new FormData(form),(t=new XMLHttpRequest).open("POST","./mail.php"),t.addEventListener("load",function(){2===Math.floor(t.status/100)?(formSended.textContent="Заявка успешно отправлена, с вами свяжутся наши специалист",n()):console.log("Error. Status code: ".concat(t.status),t)}),t.addEventListener("error",function(){formSended.textContent="Что-то пошло не так. Пожалуйста, проверьте ваше соединение и попробуйте отправить снова",n()}),t.send(e),formLoading.classList.add("loading"))}),validate.forEach(function(e){e.addEventListener("click",function(){e.classList.remove("wrong")})})});