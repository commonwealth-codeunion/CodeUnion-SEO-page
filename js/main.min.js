function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var preloader=document.querySelector(".preloader"),headerBurger=document.querySelector(".header__burger"),headerNav=document.querySelector(".header__nav"),headerNavItem=document.querySelectorAll(".header__nav-item"),inputPhone=document.querySelector("#phone"),wrapper=document.querySelector(".wrapper"),popupBtn=document.querySelectorAll(".popup-btn"),popup=document.querySelector(".popup"),popupWrapper=document.querySelector(".popup__wrapper"),popupClose=document.querySelector(".popup__close"),footer=document.querySelector(".footer"),form=document.querySelector(".form"),validate=document.querySelectorAll(".form__input"),formLoading=form.querySelector(".form__sending"),formSended=document.querySelector(".sended"),sectionUp=document.querySelector(".section-up"),sectionDown=document.querySelector(".section-down"),sectionBg=document.querySelectorAll(".section-bg"),servicesBg=document.querySelector(".services__bg"),bg=document.querySelector(".section-bg-main"),promotionNext=document.querySelector(".promotion__next"),servicesBgSource=servicesBg.querySelector("source"),bgSource=bg.querySelector("source"),isPlaying=!0;function checkWidth(){1025<=window.innerWidth?(sectionBg.forEach(function(e){var t=e.querySelector("source");t.src=t.dataset.src,e.load()}),videoHandler(sectionBg,"play")):(sectionBg.forEach(function(e){e.querySelector("source").src=""}),videoHandler(sectionBg,"pause"))}function showRotateImg(){var e;window.innerWidth<=840&&window.innerHeight<=420?((e=document.createElement("img")).src="../images/rotate.png",formSended.appendChild(e),classlistHandler([wrapper,formSended],"add","active"),$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1)):(formSended.innerHTML="",classlistHandler([wrapper,formSended],"remove","active"),$.fn.fullpage.setAllowScrolling(!0),$.fn.fullpage.setKeyboardScrolling(!0))}checkWidth();var err=0;function formValidate(t){for(var e=0;e<t.length;e++){var n=function(e){if(t[e].classList.contains("email")){if(!/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(t[e].value))return t[e].classList.add("wrong"),setTimeout(function(){t[e].classList.remove("wrong")},1e3),{v:err++}}else if(t[e].classList.contains("phone")){if(11!==t[e].value.replace(/[^\w\s]/g,"").split(" ").join("").length)return t[e].classList.add("wrong"),setTimeout(function(){t[e].classList.remove("wrong")},1e3),{v:err++}}else if(!t[e].value)return t[e].classList.add("wrong"),setTimeout(function(){t[e].classList.remove("wrong")},1e3),{v:err++};err=0}(e);if("object"===_typeof(n))return n.v}}function sendForm(){var e=new FormData(form),t=new XMLHttpRequest;t.open("POST","./mail.php"),t.addEventListener("load",function(){return 2!==Math.floor(t.status/100)?(console.log("Error. Status code: ".concat(t.status),t),popup.classList.add("result"),void(popupWrapper.innerHTML="Произошла ошибка, пожалуйста, проверьте соединение")):(popup.classList.add("result"),popupWrapper.style.fontSize="22px",void(popupWrapper.innerHTML=t.response))}),t.addEventListener("error",function(){popup.classList.add("result"),popupWrapper.style.fontSize="22px",popupWrapper.innerHTML=t.response||"Произошла ошибка, пожалуйста, проверьте соединение"}),t.send(e),formLoading.classList.add("loading")}function videoHandler(e,t){setTimeout(function(){e.forEach(function(e){isPlaying="play"===t?(e.play(),!0):(e.pause(),!1)})},0)}function classlistHandler(e,t,n){for(var r=0;r<e.length;r++)"toggle"===t?e[r].classList.toggle(n):"add"===t?e[r].classList.add(n):e[r].classList.remove(n);e.forEach(function(e){})}function removeError(){for(var e=0;e<validate.length;e++)!function(e){validate[e].addEventListener("click",function(){validate[e].classList.remove("wrong")})}(e)}document.addEventListener("DOMContentLoaded",function(){document.body.insertAdjacentHTML("afterbegin",'\n    \x3c!-- Yandex.Metrika counter --\x3e\n    <script type="text/javascript">\n        (function (m, e, t, r, i, k, a) {\n        m[i] = m[i] || function () {\n            (m[i].a = m[i].a || []).push(arguments)\n        };\n        m[i].l = 1 * new Date();\n        k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k,\n            a)\n        })\n        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");\n        ym(70339147, "init", {\n        clickmap: true,\n        trackLinks: true,\n        accurateTrackBounce: true\n        });\n    <\/script>\n    <noscript>\n        <div><img src="https://mc.yandex.ru/watch/70339147" style="position:absolute; left:-9999px;" alt="" /></div>\n    </noscript>\n    \x3c!-- /Yandex.Metrika counter --\x3e\n    '),window.addEventListener("resize",function(){showRotateImg(),checkWidth()}),preloader.classList.add("loaded"),document.body.style.overflow="";$("#fullpage").fullpage({menu:"#myMenu",normalScrollElements:".trust__slider",anchors:["promotion","why","services","price","trust"],onLeave:function(e,t){10<servicesBgSource.src.length&&10<bgSource.src.length&&(1===t?(servicesBg.style.display="none",bg.style.display="block",setTimeout(function(){videoHandler(sectionBg,"play")},150)):2===t?(servicesBg.style.display="none",bg.style.display="block",setTimeout(function(){videoHandler(sectionBg,"play")},150),3===e&&(bg.currentTime=servicesBg.currentTime)):3===t?(setTimeout(function(){bg.style.display="none",servicesBg.style.display="block",servicesBg.play()},700),servicesBg.currentTime=bg.currentTime+.7):setTimeout(function(){videoHandler(sectionBg,"pause"),bg.style.display="none",servicesBg.style.display="block"},150))}});sectionUp.addEventListener("click",function(){$.fn.fullpage.moveSectionUp()}),sectionDown.addEventListener("click",function(){$.fn.fullpage.moveSectionDown()});new Swiper(".services__slider",{speed:500,loop:!0,spaceBetween:200,pagination:{el:".swiper-pagination",type:"fraction"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),new Swiper(".trust__slider",{lazy:!0,speed:600,loop:!0,slidesPerView:3,spaceBetween:108,autoplay:{delay:1500,disableOnInteraction:!0},breakpoints:{540:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:3,spaceBetween:50},1024:{slidesPerView:3,spaceBetween:108}}});popupClose.addEventListener("click",function(){videoHandler(sectionBg,"play"),classlistHandler([popup,wrapper],"remove","active"),$.fn.fullpage.setAllowScrolling(!0),$.fn.fullpage.setKeyboardScrolling(!0)}),wrapper.addEventListener("click",function(){videoHandler(sectionBg,"play"),classlistHandler([popup,wrapper],"remove","active"),$.fn.fullpage.setAllowScrolling(!0),$.fn.fullpage.setKeyboardScrolling(!0)}),inputPhone.addEventListener("keydown",function(e){"ArrowLeft"!=e.key&&"ArrowRight"!=e.key&&"Backspace"!=e.key&&"Tab"!=e.key&&e.preventDefault();var t="+7 (111) 111-11-11";if(/[0-9\+\ \-\(\)]/.test(e.key)){var n=this.value,r=n.length;if(/[0-9]/.test(e.key))if("1"==t[r])this.value=n+e.key;else for(var o=r;o<t.length;o++){if("1"==t[o]){this.value=n+e.key;break}n+=t[o]}}}),form.addEventListener("submit",function(e){e.preventDefault(),formValidate(validate),0===err&&sendForm()}),showRotateImg(),headerBurger.addEventListener("click",function(){classlistHandler([footer,headerNav,headerBurger],"toggle","active")}),function(){for(var e=0;e<headerNavItem.length;e++)headerNavItem[e].addEventListener("click",function(){classlistHandler([footer,headerNav,headerBurger],"remove","active")})}(),function(){for(var e=0;e<popupBtn.length;e++)popupBtn[e].addEventListener("click",function(){event.stopPropagation(),videoHandler(sectionBg,"pause"),classlistHandler([popup,wrapper],"toggle","active"),$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1)})}(),removeError()});